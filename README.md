<div align="center">

# <b><span style="background: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Adaptive Agent MCP</span></b>

### **è®©ä½ çš„ AI çœŸæ­£"è®°ä½"ä½ **

> _"æˆ‘å·²ç»å‘Šè¯‰ Claude æˆ‘å–œæ¬¢ TypeScript 100éäº†ï¼Œä¸ºä»€ä¹ˆå®ƒè¿˜åœ¨ç»™æˆ‘å†™ JavaScriptï¼Ÿ"_
> 
> _"ä¸Šå‘¨ Cursor å¸®æˆ‘å®ç°çš„ç»„ä»¶æ¶æ„ï¼Œä»Šå¤©æ€ä¹ˆåˆä»å¤´é—®æˆ‘ï¼Ÿ"_

**è¿™å°±æ˜¯ Adaptive Agent MCP è¦è§£å†³çš„é—®é¢˜ã€‚**

ä¸€ä¸ªåŸºäº MCP åè®®çš„**è·¨åº”ç”¨æŒä¹…åŒ–è®°å¿†ç³»ç»Ÿ**ã€‚æ— è®ºä½ ç”¨ Claude Codeã€Cursorã€Antigravity è¿˜æ˜¯å…¶ä»–ä»»ä½•æ”¯æŒ MCP çš„å·¥å…·â€”â€”ä½ çš„åå¥½ã€é¡¹ç›®ä¸Šä¸‹æ–‡ã€çŸ¥è¯†ç§¯ç´¯ï¼Œéƒ½å°†**æ°¸ä¹…è®°ä½ã€éšæ—¶è°ƒç”¨ã€è·¨å¹³å°å…±äº«**ã€‚

**ä¸€æ¬¡æ•™ä¼šï¼Œç»ˆç”Ÿå—ç”¨ã€‚ä¸å†é‡å¤ï¼Œä¸å†é—å¿˜ã€‚**

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)
[![Python 3.10+](https://img.shields.io/badge/python-3.10+-blue.svg)](https://www.python.org/downloads/)
[![MCP](https://img.shields.io/badge/MCP-Protocol-green.svg)](https://modelcontextprotocol.io)

</div>

---

## å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ

```
åœ¨ Claude Code ä¸­: "è®°ä½ï¼Œæˆ‘å–œæ¬¢ä½¿ç”¨ TypeScript"
åœ¨ Antigravity ä¸­: "æˆ‘çš„ç¼–ç¨‹åå¥½æ˜¯ä»€ä¹ˆï¼Ÿ"
AI: "ä½ å–œæ¬¢ä½¿ç”¨ TypeScript"
```

åœ¨ä»»ä½•æ”¯æŒ MCP çš„åº”ç”¨ä¸­éƒ½å¯å¿«é€Ÿæ¥å…¥ï¼Œ**çœŸæ­£å®ç° AI è®°å¿†çš„è·¨å¹³å°æ— ç¼æµè½¬**ã€‚

---

## è®°å¿†ä¸ä¼šæ··ä¹±å—ï¼Ÿâ€”â€”Scope ä½œç”¨åŸŸæœºåˆ¶

> _"å¦‚æœæ‰€æœ‰é¡¹ç›®å…±äº«è®°å¿†ï¼Œé‚£é¡¹ç›® A çš„åå¥½ä¼šä¸ä¼šæ±¡æŸ“é¡¹ç›® Bï¼Ÿ"_
> _"è·Ÿ AI èŠå¤©æ—¶æƒ³è¦å–èŒæ’’å¨‡ï¼Œå†™ä»£ç æ—¶åˆè¦ä¸¥è°¨ä¸“ä¸šï¼Œè¿™æ€ä¹ˆåŒºåˆ†ï¼Ÿ"_

**éƒ½å¯ä»¥ã€‚** æˆ‘ä»¬è®¾è®¡äº† **ä¸‰å±‚ Scopeï¼ˆä½œç”¨åŸŸï¼‰** æœºåˆ¶æ¥ç²¾ç¡®æ§åˆ¶è®°å¿†çš„è¾¹ç•Œï¼š

| ä½œç”¨åŸŸç±»å‹ | ä¼˜å…ˆçº§ | é€‚ç”¨åœºæ™¯ | ç¤ºä¾‹ |
|-----------|-------|---------|------|
| **project:xxx** | æœ€é«˜ | é¡¹ç›®ä¸“å±è§„èŒƒ | "è¿™ä¸ªé¡¹ç›®ç”¨ vanilla CSS" |
| **app:xxx** | ä¸­ç­‰ | åœºæ™¯ç‰¹å®šåå¥½ | "èŠå¤©æ—¶å–èŒï¼Œå†™ä»£ç æ—¶ä¸¥è°¨" |
| **global** | æœ€ä½ | é€šç”¨åå¥½ | "æˆ‘å–œæ¬¢ TypeScript" |

### åœºæ™¯çº§ Scopeï¼ˆv0.2.0 æ–°å¢ï¼‰

```
ä½ : "è·Ÿæˆ‘èŠå¤©æ—¶è¯´è¯è¦ç”œä¸€ç‚¹ï¼Œç”¨é¢œæ–‡å­—"
AI: âœ“ å·²ä¿å­˜åˆ° [app:chat]

ä½ : "å†™ä»£ç æ—¶è¦ä¸“ä¸šä¸¥è°¨"  
AI: âœ“ å·²ä¿å­˜åˆ° [app:coding]

(åœ¨èŠå¤©åœºæ™¯)
AI: å¥½çš„ä¸»äººï½ (â‰§â–½â‰¦)

(åœ¨å†™ä»£ç åœºæ™¯)
AI: å·²å®Œæˆä»£ç é‡æ„ï¼Œä»¥ä¸‹æ˜¯å˜æ›´è¯´æ˜...
```

### è¯­ä¹‰ç†è§£é©±åŠ¨

**Agent ä¼šæ ¹æ®å¯¹è¯æ„å›¾è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„ scope**ï¼Œæ— éœ€ç”¨æˆ·æ˜ç¡®è¯´æ˜ï¼š

| å¯¹è¯æ„å›¾ | è‡ªåŠ¨æ¨æ–­ Scope |
|---------|---------------|
| é—²èŠã€æƒ…æ„Ÿäº¤æµ | `app:chat` |
| å†™ä»£ç ã€æŠ€æœ¯è®¨è®º | `app:coding` |
| å†™æ–‡æ¡£ã€æ–‡æ¡ˆåˆ›ä½œ | `app:writing` |
| åœ¨æŸé¡¹ç›®ä¸­å·¥ä½œ | `project:xxx` |
| æ— æ³•åˆ¤æ–­ | `global` |

### æŸ¥è¯¢æ—¶çš„æ™ºèƒ½è¿‡æ»¤

- åœ¨**é¡¹ç›® A** ä¸­æŸ¥è¯¢ â†’ è¿”å› **global + app:coding + project:A**
- åœ¨**èŠå¤©åœºæ™¯**æŸ¥è¯¢ â†’ è¿”å› **global + app:chat**
- æ›´å…·ä½“çš„ scope ä¼˜å…ˆçº§æ›´é«˜ï¼Œä¼šè¦†ç›–é€šç”¨è®¾ç½®

**ç»“è®º**: æ—¢äº«å—è·¨å¹³å°å…±äº«å…¨å±€åå¥½çš„ä¾¿åˆ©ï¼Œåˆä¿è¯åœºæ™¯çº§å’Œé¡¹ç›®çº§çš„ç²¾ç¡®éš”ç¦»ã€‚

---

## å¿«é€Ÿå¼€å§‹

### å¿«é€Ÿå®‰è£…

<details open>
<summary><b>VS Code / Cherry studio / Antigravity / Claude Code / ç­‰ä»»ä½•æ”¯æŒ MCP çš„ AI åº”ç”¨</b></summary>

é…ç½® `mcp.json`:

```json
{
  "mcpServers": {
    "adaptive-agent-mcp": {
      "command": "uvx",
      "args": ["adaptive-agent-mcp"]
    }
  }
}
```

</details>

<details>
<summary><b>Claude Code</b></summary>

```bash
claude mcp add adaptive-memory \
  --type stdio \
  --command uvx \
  --args "adaptive-agent-mcp"
```

</details>

> ä¸æŒ‡å®š `--storage-path` æ—¶ï¼Œä½¿ç”¨é»˜è®¤è·¯å¾„ `~/.adaptive-agent/memory`ï¼Œæ‰€æœ‰åº”ç”¨å…±äº«åŒä¸€ä»½è®°å¿†ã€‚

---

## é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ docs/                        # å®Œæ•´æ–‡æ¡£
â”œâ”€â”€ adaptive_agent_mcp/          # ä¸»é¡¹ç›®ç›®å½•
â”‚   â”œâ”€â”€ server.py                # MCP æœåŠ¡å™¨å…¥å£
â”‚   â”œâ”€â”€ src/                     # æºä»£ç 
â”‚   â”‚   â”œâ”€â”€ config.py            # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ storage.py           # å­˜å‚¨å±‚
â”‚   â”‚   â”œâ”€â”€ indexer.py           # å¢é‡ç´¢å¼•ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ search_engine.py     # æœç´¢å¼•æ“
â”‚   â”‚   â”œâ”€â”€ lock_manager.py      # å¹¶å‘é”ç®¡ç† (v0.3.0+)
â”‚   â”‚   â”œâ”€â”€ vector_client.py     # å‘é‡ API å®¢æˆ·ç«¯ (v0.4.0+)
â”‚   â”‚   â”œâ”€â”€ vector_store.py      # SQLite å‘é‡å­˜å‚¨ (v0.4.0+)
â”‚   â”‚   â”œâ”€â”€ graph_store.py       # çŸ¥è¯†å›¾è°±å­˜å‚¨ (v0.5.0+)
â”‚   â”‚   â””â”€â”€ tools/               # MCP å·¥å…·
â”‚   â””â”€â”€ README.md                # é¡¹ç›®è¯¦ç»†æ–‡æ¡£
â”œâ”€â”€ smoke_test.py                # çƒŸé›¾æµ‹è¯•
â””â”€â”€ verify_full.py               # å®Œæ•´åŠŸèƒ½æµ‹è¯•
```

---

## ç‰¹æ€§

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **è·¨åº”ç”¨è®°å¿†äº’é€š** | å¤šä¸ª AI åº”ç”¨å…±äº«åŒä¸€ä»½è®°å¿† |
| **Scope ä½œç”¨åŸŸéš”ç¦»** | å…¨å±€åå¥½ vs é¡¹ç›®ä¸“å±é…ç½®ï¼Œäº’ä¸å¹²æ‰° |
| **ä¸‰å±‚è®°å¿†æ¶æ„** | çŸ¥è¯†å›¾è°± + æ¯æ—¥ç¬”è®° + éšæ€§çŸ¥è¯† |
| **è¯­ä¹‰æœç´¢ (v0.4.0+)** | åŸºäº Embedding API çš„å‘é‡æ£€ç´¢ + Rerank ç²¾æ’ |
| **FTS5 å…¨æ–‡æœç´¢ (v0.4.0+)** | SQLite å†…ç½®å…¨æ–‡æœç´¢ï¼ŒBM25 æ’å |
| **çŸ¥è¯†å›¾è°± (v0.5.0+)** | åŸºäº NetworkX çš„å®ä½“å…³ç³»å­˜å‚¨ï¼Œæ”¯æŒå¤šè·³æ¨ç† |
| **å¹¶å‘å®‰å…¨ (v0.3.0+)** | åŸºäº filelock çš„è·¨è¿›ç¨‹æ–‡ä»¶é” |
| **å¢é‡ç´¢å¼• (v0.3.0+)** | åŸºäº mtime çš„æ™ºèƒ½å¢é‡ç´¢å¼• |
| **æ—¶é—´æƒå¨** | MCP æ˜¯å”¯ä¸€æ—¶é—´æ¥æºï¼Œé˜²æ­¢ Agent æ—¶é—´å¹»è§‰ |
| **çŸ¥è¯†æ¼”åŒ–** | æ”¯æŒäº‹å®ç‰ˆæœ¬ç®¡ç†å’Œ supersede æœºåˆ¶ |

---

## å»ºè®®å®‰è£…ï¼šripgrep

å…¨æ–‡æœç´¢åŠŸèƒ½ä¾èµ– [ripgrep](https://github.com/BurntSushi/ripgrep)ï¼Œå¦‚éœ€ä½¿ç”¨ `search_memory_content` å·¥å…·è¯·å®‰è£…ï¼š

<details>
<summary><b>å®‰è£…æ–¹æ³•</b></summary>

**Windows (æ¨è)**:
```powershell
winget install BurntSushi.ripgrep.MSVC
```

**macOS**:
```bash
brew install ripgrep
```

**Linux**:
```bash
# Ubuntu/Debian
sudo apt install ripgrep

# Arch
sudo pacman -S ripgrep
```

**æ‰‹åŠ¨é…ç½®ç¯å¢ƒå˜é‡** (å¦‚è‡ªåŠ¨æ£€æµ‹å¤±è´¥):
```bash
# Windows: å°† rg.exe æ‰€åœ¨ç›®å½•æ·»åŠ åˆ° PATH
# æˆ–è®¾ç½®ç¯å¢ƒå˜é‡
ADAPTIVE_AGENT_RIPGREP_PATH=C:\path\to\rg.exe
```

</details>

---

## å¯é€‰é…ç½®ï¼šè¯­ä¹‰æœç´¢ API (v0.4.0+)

å¯ç”¨è¯­ä¹‰æœç´¢éœ€è¦é…ç½® Embedding APIï¼ŒRerank API å¯é€‰ä½†æ¨èã€‚

<details>
<summary><b>ç¯å¢ƒå˜é‡é…ç½®</b></summary>

```bash
# Embedding API (å¿…éœ€ - ç”¨äºè¯­ä¹‰æœç´¢)
ADAPTIVE_EMBEDDING_BASE_URL=https://api-inference.modelscope.cn/v1
ADAPTIVE_EMBEDDING_API_KEY=your-api-key
ADAPTIVE_EMBEDDING_MODEL=Qwen/Qwen3-Embedding-8B

# Rerank API (å¯é€‰ - æå‡æœç´¢ç²¾åº¦)
ADAPTIVE_RERANK_BASE_URL=https://api-inference.modelscope.cn/v1
ADAPTIVE_RERANK_API_KEY=your-api-key
ADAPTIVE_RERANK_MODEL=Qwen/Qwen3-Reranker-8B
```

æ”¯æŒä»»ä½• OpenAI å…¼å®¹çš„ Embedding API (å¦‚ ModelScope, SiliconFlow, DeepSeek) å’Œ Cohere å…¼å®¹çš„ Rerank APIã€‚

</details>

---

## MCP å·¥å…·

| å·¥å…· | åŠŸèƒ½ |
|------|------|
| `initialize_session` | ä¼šè¯åˆå§‹åŒ–ï¼Œæ¯æ¬¡å¯¹è¯å¿…é¡»é¦–å…ˆè°ƒç”¨ |
| `query_memory_headers` | ç´¢å¼•æ‰«æï¼Œå¿«é€ŸæŸ¥æ‰¾è®°å¿†ä½ç½® |
| `read_memory_content` | è¯»å–æŒ‡å®šæ–‡ä»¶çš„å®Œæ•´å†…å®¹ |
| `search_memory_content` | åŸºäº ripgrep çš„å…¨æ–‡æœç´¢ |
| `append_daily_log` | å†™å…¥æ¯æ—¥ç¬”è®°æˆ–çŸ¥è¯†å›¾è°± |
| `query_knowledge` | æŸ¥è¯¢çŸ¥è¯†åº“ä¸­çš„å·²ä¿å­˜çŸ¥è¯† |
| `get_period_context` | èšåˆå‘¨/æœˆæ—¥å¿—ç”¨äºæ€»ç»“ |
| `archive_period` | ä¿å­˜å‘¨æœŸæ€»ç»“ |
| **è¯­ä¹‰æœç´¢ (v0.4.0+)** | |
| `semantic_search` | åŸºäºå‘é‡çš„è¯­ä¹‰ç›¸ä¼¼åº¦æœç´¢ |
| `fulltext_search` | SQLite FTS5 å…¨æ–‡æœç´¢ (BM25) |
| `index_document` | å°†æ–‡æ¡£ç´¢å¼•åˆ°å‘é‡æ•°æ®åº“ |
| `get_vector_stats` | æŸ¥çœ‹å‘é‡ç³»ç»ŸçŠ¶æ€ |
| **çŸ¥è¯†å›¾è°± (v0.5.0+)** | |
| `extract_knowledge` | ä»æ–‡æœ¬è‡ªåŠ¨æŠ½å–å®ä½“å…³ç³» |
| `add_knowledge_relation` | æ‰‹åŠ¨æ·»åŠ å®ä½“å…³ç³» |
| `query_knowledge_graph` | æŸ¥è¯¢å®ä½“/å…³ç³»/ç»Ÿè®¡ |
| `multi_hop_query` | å¤šè·³å…³ç³»æ¨ç†æŸ¥è¯¢ |

---

## æ–‡æ¡£

- [å¿«é€Ÿå¼€å§‹](./docs/å¿«é€Ÿå¼€å§‹.md)
- [ä½¿ç”¨æŒ‡å—](./docs/ä½¿ç”¨æŒ‡å—.md)
- [æ¶æ„è®¾è®¡](./docs/æ¶æ„è®¾è®¡.md)
- [ä½¿ç”¨åœºæ™¯ç¤ºä¾‹](./docs/ä½¿ç”¨åœºæ™¯ç¤ºä¾‹.md)
- [é¡¹ç›®è¯¦ç»†æ–‡æ¡£](./adaptive_agent_mcp/README.md)

---

<details>
<summary><b>å¼€å‘å®‰è£…</b></summary>

```bash
git clone https://github.com/justforever17/adaptive-agent-mcp.git
cd adaptive-agent-mcp

# å®‰è£…ä¾èµ–
pip install -e .

# å¯é€‰ï¼šå®‰è£… ripgrep ä»¥å¯ç”¨å…¨æ–‡æœç´¢
# Windows: choco install ripgrep
# macOS: brew install ripgrep
```

</details>

<details>
<summary><b>é¡¹ç›®çº§è®°å¿†éš”ç¦» (å¯é€‰)</b></summary>

å¦‚æœå¸Œæœ›æ¯ä¸ªé¡¹ç›®ä½¿ç”¨ç‹¬ç«‹çš„è®°å¿†ï¼Œå¯ä»¥æŒ‡å®š `--storage-path`:

```json
{
  "mcpServers": {
    "adaptive-agent-mcp": {
      "command": "uvx",
      "args": [
        "adaptive-agent-mcp",
        "--storage-path",
        "${workspaceFolder}/.agent_memory"
      ]
    }
  }
}
```

</details>

---

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestã€‚

---

## è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](./LICENSE)

---

## è‡´è°¢

- [Anthropic](https://www.anthropic.com/) - MCP åè®®åˆ›å»ºè€…
- [FastMCP](https://github.com/jlowin/fastmcp) - ç®€åŒ– MCP å¼€å‘
- [ripgrep](https://github.com/BurntSushi/ripgrep) - é«˜æ€§èƒ½æœç´¢å¼•æ“

---

## ğŸ’– èµåŠ© (Sponsorship)

ç»´æŠ¤å¼€æºé¡¹ç›®ä¸æ˜“ï¼Œå¦‚æœæ‚¨è§‰å¾— adaptive-agent-mcp å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ¬¢è¿è¯·ä½œè€…å–æ¯å’–å•¡ï¼

<div align="center">

| å¹³å° | é“¾æ¥ | æ”¯ä»˜æ–¹å¼ |
| :--- | :--- | :--- |
| **çˆ±å‘ç”µ (Afdian)** | [![Afdian](https://img.shields.io/badge/Afdian-æ”¯æŒæˆ‘-946ce6?logo=afdian)](https://afdian.com/a/justforever17) | å¾®ä¿¡, æ”¯ä»˜å® |

</div>